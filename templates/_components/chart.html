{% load i18n static %}
<div class="card" role="figure" aria-labelledby="{{ chart_id }}-title">
  <div class="card-body">
    <h2 id="{{ chart_id }}-title" class="text-xl font-semibold mb-4">{{ title }}</h2>
    <canvas id="{{ chart_id }}" class="w-full h-64" role="img" aria-label="{{ title }}"></canvas>
  </div>
</div>
<script src="{% static 'js/vendor/chart-4.5.0.min.js' %}"></script>
<script>
  (function(){
    const ctx = document.getElementById('{{ chart_id }}');
    if(ctx){
      const primaryColor = getComputedStyle(document.documentElement).getPropertyValue('--primary').trim();
      new Chart(ctx, {
        type: '{{ type|default:"bar" }}',
        data: {labels: {{ labels|safe }}, datasets:[{label: '{{ title }}', data: {{ data|safe }}, backgroundColor: primaryColor}]},
        options: {responsive: true, maintainAspectRatio: false}
      });
    }
  })();
</script>
