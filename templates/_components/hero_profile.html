{% load string_filters %}
<section class="relative isolate overflow-visible bg-gradient-to-r from-[var(--hero-from)] to-[var(--hero-to)]">
  {% if profile.cover %}
    <img src="{{ profile.cover.url }}" alt="" class="absolute inset-0 h-full w-full object-cover opacity-40" loading="lazy">
  {% endif %}
  <div class="relative mx-auto max-w-7xl px-4 h-48 md:h-64 text-center text-white"></div>
  <div class="absolute bottom-0 left-1/2 translate-y-1/2 -translate-x-1/2 z-50">
    <div class="h-32 w-32 md:h-40 md:w-40 rounded-full ring-4 ring-white/90 overflow-hidden shadow-lg bg-[var(--bg-primary)]">
      {% if profile.avatar %}
        <img src="{{ profile.avatar_url }}" alt="{{ profile.get_full_name|default:profile.username }}" class="h-full w-full object-cover" loading="lazy">
      {% else %}
        <div class="h-full w-full grid place-items-center text-3xl font-semibold text-[var(--text-secondary)]">
          {{ profile.get_initials|default:profile.username|slice:":2"|upper }}
        </div>
      {% endif %}
    </div>
  </div>
</section>

<section class="container mt-16 md:mt-20">
  <div class="mx-auto w-full max-w-4xl">
    <div class="profile-card rounded-xl border bg-[var(--bg-primary)]">
      <div class="pt-24 md:pt-10 text-center md:text-left md:pl-44">
        <h2 class="text-2xl font-semibold text-[var(--text-primary)] md:mb-1 md:mt-2">
          {{ profile.get_full_name|default:profile.username }}
        </h2>
        <p class="text-sm text-[var(--text-muted)]">@{{ profile.username }}</p>
      </div>
      <div class="mt-6 flex flex-col items-center justify-center space-y-2 md:flex-row md:flex-wrap md:justify-start md:space-y-0 md:space-x-2 md:pl-44">
        <button class="btn btn-primary">Info</button>
        <button class="btn btn-secondary">Portfólio</button>
        <button class="btn btn-secondary">Mural</button>
        <button class="btn btn-outline">Conexões</button>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 p-6">
        <div>
          <div class="text-[var(--text-tertiary)] text-sm mb-1">E-mail</div>
          <a href="mailto:{{ profile.email }}" class="text-[var(--text-primary)] hover:underline break-all">
            {{ profile.email|default:"-" }}
          </a>
        </div>
        <div>
          <div class="text-[var(--text-tertiary)] text-sm mb-1">Fone</div>
          <div class="text-[var(--text-primary)]">{{ profile.phone_number|default:"-" }}</div>
        </div>
      </div>

      {% if profile.redes_sociais %}
        <div class="border-t border-[var(--border)] p-4 sm:p-6">
          <div class="flex items-center justify-center md:justify-start gap-4 text-xl text-[var(--text-secondary)]">
            {% with redes='whatsapp instagram linkedin x'|split %}
              {% for nome in redes %}
                {% with link=profile.redes_sociais|get_item:nome %}
                  {% if link %}
                    <a href="{{ link }}" target="_blank" rel="noopener" class="hover:text-[var(--text-primary)]" aria-label="{{ nome|title }}">
                      <i class="fa-brands {% if nome == 'x' %}fa-x-twitter{% else %}fa-{{ nome }}{% endif %}"></i>
                    </a>
                  {% endif %}
                {% endwith %}
              {% endfor %}
            {% endwith %}
          </div>
        </div>
      {% endif %}
    </div>
  </div>
</section>

