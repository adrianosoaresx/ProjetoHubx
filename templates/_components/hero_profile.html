{% load i18n lucide_icons %}
          
<section class="relative isolate overflow-visible">
  <div class="relative overflow-hidden min-h-[400px] sm:min-h-[440px] lg:min-h-[480px] {% if not profile.cover %}bg-gradient-to-r from-[var(--hero-from)] to-[var(--hero-to)]{% endif %}">
    {% if profile.cover %}
      <img src="{{ profile.cover.url }}" alt="" class="absolute inset-0 h-full w-full object-cover" loading="eager" fetchpriority="high">
      <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"></div>
    {% endif %}
  </div>


  <div class="container relative mx-auto px-6 pb-10 lg:pb-14 z-10 sm:-mt-12 md:-mt-16 lg:-mt-24 xl:-mt-28">
    {% if back_href %}
      <div class="mb-4 flex justify-start">
        {% include '_components/back_button.html' with href=back_href classes='btn btn-secondary btn-sm bg-white/80 text-gray-900 hover:bg-white focus-visible:ring-offset-0' disable_history=True %}
      </div>
    {% endif %}
    <div class="rounded-2xl border border-[var(--border)] bg-transparent p-4 md:p-6 shadow-lg transition-colors">
      {% with display_name=hero_title|default:profile.display_name subtitle=hero_subtitle %}
        <div class="flex flex-col items-center gap-4 sm:flex-row sm:items-start sm:gap-6">
          <div class="mx-auto h-20 w-20 shrink-0 overflow-hidden rounded-full bg-[var(--bg-secondary)] ring-4 ring-[var(--bg-primary)] sm:mx-0 md:h-24 md:w-24">
            {% if profile.avatar %}
              <img src="{{ profile.avatar_url }}" alt="{{ display_name|default:profile.username }}" class="h-full w-full object-cover" loading="lazy">
            {% else %}
              <div class="grid h-full w-full place-items-center text-2xl font-semibold text-[var(--text-secondary)]">
                {{ profile.get_initials|default:profile.username|slice:":2"|upper }}
              </div>
            {% endif %}
          </div>

          <div class="min-w-0 space-y-1.5 text-center sm:text-left">
            <h2 class="text-2xl font-semibold text-[var(--text-primary)] md:text-3xl">
              <span class="inline-block rounded-lg bg-black/60 px-2 py-1 text-white shadow-sm ring-1 ring-white/10 backdrop-blur-sm">
                {{ display_name|default:profile.username }}
              </span>
            </h2>

            <span class="inline-flex items-center gap-1 rounded-lg border border-[var(--border)] bg-[var(--bg-secondary)] px-2 py-0.5 text-sm font-medium text-[var(--text-secondary)] sm:text-base">
              <span aria-hidden="true">@</span>{{ profile.username }}
            </span>

            {% if subtitle %}
              <p class="text-sm text-[var(--text-secondary)] sm:text-base">
                {{ subtitle }}
              </p>
            {% endif %}

          </div>

        </div>
      {% endwith %}

      {% with redes=profile.redes_sociais %}
        <div class="mt-6 flex flex-wrap items-center justify-center gap-3{% if redes or profile.whatsapp %} sm:justify-between{% endif %}">
          {% if redes %}
            <div class="flex flex-wrap justify-center gap-3">
              {% for rede, url in redes.items %}
                {% if url %}
                  <a
                    href="{{ url }}"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="{{ rede|capfirst }}"
                    class="inline-flex items-center text-[var(--text-secondary)] transition hover:scale-110 hover:text-[var(--text-primary)]"
                  >
                    {% lucide rede class="h-6 w-6" %}
                  </a>
                {% endif %}
              {% endfor %}
            </div>
          {% endif %}

          {% if profile.whatsapp %}
            <a
              href="https://wa.me/{{ profile.whatsapp|cut:"+" }}"
              class="inline-flex items-center text-[var(--text-secondary)] transition hover:scale-110 hover:text-[var(--text-primary)]"
              aria-label="WhatsApp"
            >
              {% lucide "whatsapp" width="28" height="28" %}
            </a>
          {% else %}
            <span class="inline-flex items-center text-[var(--text-muted)]" aria-label="WhatsApp indisponÃ­vel">
              {% lucide "whatsapp" class="h-8 w-8" %}
            </span>
          {% endif %}
        </div>
      {% endwith %}

    </div>
  </div>
</section>
