{% load i18n %}
<aside id="sidebar" class="fixed inset-y-0 left-0 z-20 w-64 bg-[var(--bg-secondary)] border-r border-[var(--border)] flex flex-col transition-all">
  <div class="flex items-center justify-between p-4 border-b border-[var(--border)]">
    <a href="/" class="text-2xl font-bold text-[var(--text-primary)]" aria-label="{% trans 'PÃ¡gina inicial' %}" {% if request.path == '/' %}aria-current="page"{% endif %}>
      {% trans 'Hubx' %}
    </a>
    <button id="sidebar-toggle" class="text-[var(--text-primary)]" aria-label="{% trans 'Alternar menu' %}" aria-controls="sidebar" aria-expanded="true">
      <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
  </div>
  <nav class="flex-1 overflow-y-auto px-4 py-4" role="navigation" aria-label="{% trans 'Menu' %}">
    {% for item in NAV_MENU %}
      <a href="{{ item.path }}" class="sidebar-item{% if request.path == item.path %} sidebar-item-active{% endif %}" {% if request.path == item.path %}aria-current="page"{% endif %}>
        {% if item.id == 'perfil' and user.avatar %}
          <img src="{{ user.avatar.url }}" alt="{{ user.username }}" class="w-6 h-6 rounded-full object-cover" />
        {% else %}
          {{ item.icon|safe }}
        {% endif %}
        <span class="sidebar-label">{{ item.label }}</span>
      </a>
      {% if item.id == 'perfil' %}<span id="notif-count" class="hidden"></span>{% endif %}
    {% endfor %}
  </nav>
</aside>

