{% load i18n lucide_icons %}
<details class="card group">
  <summary class="card-header flex items-center justify-between gap-4 cursor-pointer">
    <div class="flex items-start gap-3">
      <span class="flex h-12 w-12 items-center justify-center rounded-full bg-[var(--color-warning-500)]/10 text-[var(--color-warning-600)] shadow-lg shadow-[var(--color-warning-500)]/15">
        {% lucide 'mail' class='h-6 w-6' aria_hidden='true' %}
      </span>
      <div class="space-y-1">
        <p class="text-xl font-semibold">{% trans "Solicitações de nucleação" %}</p>
        <p class="text-sm text-[var(--text-secondary)]">
          {% blocktrans count total=total_nucleacao_solicitacoes %}
            {{ total }} solicitação pendente
          {% plural %}
            {{ total }} solicitações pendentes
          {% endblocktrans %}
        </p>
      </div>
    </div>
    <span class="text-[var(--text-secondary)] transition-transform duration-200 group-open:-rotate-180">
      {% lucide 'chevron-down' class='w-5 h-5' aria_hidden='true' %}
    </span>
  </summary>
  <div class="border-t border-[var(--border)] p-4 sm:p-6">
    <div
      class="space-y-4"
      data-carousel-root="nucleacao-solicitacoes"
      data-current-slide="1"
      data-backend-page="1"
      data-backend-total-pages="1"
      aria-label="{% trans 'Solicitações de nucleação' %}"
    >
      <div class="relative">
        <div class="card overflow-hidden rounded-xl" data-carousel-viewport>
          <div class="flex transition-transform duration-500 ease-out" data-carousel-track>
            {% include 'nucleos/partials/nucleacao_solicitacao_carousel_slide.html' with solicitacoes=nucleacao_solicitacoes page_number=1 empty_message=_('Nenhuma solicitação de nucleação pendente.') %}
          </div>
        </div>
        {% if nucleacao_solicitacoes %}
          <div class="absolute inset-y-0 left-4 flex items-center">
            <button
              type="button"
              class="group mr-3 flex items-center justify-center text-[var(--text-primary)] transition hover:bg-[var(--color-primary-500)] hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--color-primary-500)]"
              data-carousel-prev
              aria-label="{% trans 'Anterior' %}"
            >
              {% lucide 'circle-chevron-left' class='h-8 w-8' aria_hidden='true' %}
            </button>
          </div>
          <div class="absolute inset-y-0 right-4 flex items-center">
            <button
              type="button"
              class="group flex items-center justify-center text-[var(--text-primary)] transition hover:bg-[var(--color-primary-500)] hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--color-primary-500)]"
              data-carousel-next
              aria-label="{% trans 'Próximo' %}"
            >
              {% lucide 'circle-chevron-right' class='h-8 w-8' aria_hidden='true' %}
            </button>
          </div>
          <div class="pointer-events-none absolute inset-y-0 left-0 hidden w-16 bg-gradient-to-r from-[var(--bg-primary)]/90 to-transparent lg:block"></div>
          <div class="pointer-events-none absolute inset-y-0 right-0 hidden w-16 bg-gradient-to-l from-[var(--bg-primary)]/90 to-transparent lg:block"></div>
        {% endif %}
      </div>
    </div>
  </div>
</details>
