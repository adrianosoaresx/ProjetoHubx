{% load i18n %}
<article id="membro-{{ part.id }}" class="card">
  <div class="card-body flex flex-col gap-2">
    <div class="flex items-center gap-4">
      {% if part.user.avatar %}
      <img src="{{ part.user.avatar.url }}" alt="{{ part.user.display_name|default:part.user.username }}" class="w-12 h-12 rounded-full object-cover" loading="lazy" />
      {% else %}
      <div class="w-12 h-12 rounded-full bg-[var(--bg-tertiary)]" role="img" aria-label="{{ part.user.display_name|default:part.user.username }}"></div>
      {% endif %}
      <div>
        <a href="{% url 'accounts:perfil_publico_uuid' part.user.public_id %}" class="font-medium text-[var(--text-primary)]">
          {{ part.user.display_name }}
        </a>
        {% if part.papel == 'coordenador' %}
        <span class="text-sm text-[var(--text-secondary)]"> - {% trans 'Coordenador' %}</span>
        {% endif %}
        {% if part.status_suspensao %}
        <span class="text-sm text-[var(--error)]">({% trans 'Suspenso' %})</span>
        {% endif %}
      </div>
    </div>
    {% if request.user.user_type == 'admin' or request.user.user_type == 'coordenador' %}
    <div class="mt-2 space-x-2">
      <button class="btn btn-secondary btn-sm"
              hx-post="{% url 'nucleos:membro_promover' object.pk part.pk %}"
              hx-target="#membro-{{ part.id }}"
              hx-swap="outerHTML"
              hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>
        {% if part.papel == 'coordenador' %}{% trans 'Rebaixar' %}{% else %}{% trans 'Promover' %}{% endif %}
      </button>
      <button class="btn btn-danger btn-sm"
              hx-post="{% url 'nucleos:membro_remover' object.pk part.pk %}"
              hx-target="#membro-{{ part.id }}"
              hx-swap="outerHTML"
              hx-confirm="{% trans 'Confirmar remoÃ§Ã£o?' %}"
              hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>
        {% trans 'Remover' %}
      </button>
      {% if part.status_suspensao %}
        <form hx-post="{% url 'nucleos_api:nucleo-reativar-membro' object.pk part.user.pk %}"
              hx-on="htmx:afterRequest: location.reload()"
              class="inline">{% csrf_token %}
          <button class="btn btn-secondary btn-sm">{% trans 'Reativar' %}</button>
        </form>
      {% else %}
        <form hx-post="{% url 'nucleos_api:nucleo-suspender-membro' object.pk part.user.pk %}"
              hx-on="htmx:afterRequest: location.reload()"
              class="inline">{% csrf_token %}
          <button class="btn btn-danger btn-sm">{% trans 'Suspender' %}</button>
        </form>
      {% endif %}
    </div>
    {% endif %}
  </div>
</article>

