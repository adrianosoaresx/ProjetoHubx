{% load i18n %}
{# Conteúdo HTMX exibido dentro de grids; layout flat aprovado pela equipe de UI para atualizações dinâmicas. #}

{% if is_htmx %}
  <div id="nucleo-hero" hx-swap-oob="true">
    {% include '_components/hero_nucleo_detail.html' with nucleo=object %}
  </div>
  <div id="nucleo-info-actions" hx-swap-oob="true" class="flex justify-end gap-3 pt-4 border-t border-[var(--border)]">
    {% if perms.nucleos.change_nucleo or request.user.user_type == 'admin' or request.user.user_type == 'coordenador' %}
      <a
        href="{% url 'nucleos:update' object.pk %}"
        class="btn btn-secondary"
      >{% trans "Editar" %}</a>
    {% endif %}
    {% if perms.nucleos.delete_nucleo or request.user.user_type == 'admin' or request.user.user_type == 'coordenador' %}
      <a
        href="{% url 'nucleos:delete' object.pk %}"
        class="btn btn-danger"
        hx-confirm="{% trans 'Deseja realmente excluir?' %}"
      >{% trans "Excluir" %}</a>
    {% endif %}
  </div>
{% endif %}

<div class="card-grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3" role="list" aria-label="{% trans 'Lista de membros do núcleo' %}">
  {% if page_obj.object_list %}
    {% for part in page_obj.object_list %}
      {% include 'nucleos/partials/membro_card.html' with part=part %}
    {% endfor %}
  {% else %}
    <p class="col-span-full text-center text-[var(--text-muted)]">{% trans 'Sem membros.' %}</p>
  {% endif %}
</div>
{% url 'nucleos:membros_list' object.pk as membros_list_url %}
{% include '_partials/pagination.html' with page_obj=page_obj querystring=querystring hx_get=membros_list_url hx_target='#membros-list' hx_indicator='#membros-loading' hx_push_url='false' %}
