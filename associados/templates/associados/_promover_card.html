{% load i18n associados_extras %}
{% url 'accounts:perfil_publico_uuid' user.public_id as profile_url %}
{% usuario_badges user as user_badges %}
<article class="card h-full flex flex-col overflow-hidden">
  <header class="card-header pb-0">
    <div class="relative -mx-6 -mt-6">
      {% include '_partials/cards/badge_list.html' with badges=user_badges %}
      {% if user.cover %}
        <img src="{{ user.cover.url|default:user.cover }}" alt="{% trans 'Capa do associado' %}" class="h-24 w-full object-cover" loading="lazy" />
      {% else %}
        <div class="h-24 w-full bg-gradient-to-r from-[var(--hero-from)] to-[var(--hero-to)]"></div>
      {% endif %}
      <div class="absolute -bottom-8 left-6">
        {% if user.avatar %}
          <img src="{{ user.avatar.url|default:user.avatar }}" alt="{{ user.display_name|default:user.username }}" class="h-16 w-16 rounded-full object-cover ring-4 ring-[var(--bg-primary)]" loading="lazy" />
        {% else %}
          <div class="flex h-16 w-16 items-center justify-center rounded-full bg-[var(--bg-tertiary)] text-lg font-semibold text-[var(--text-primary)] ring-4 ring-[var(--bg-primary)]" role="img" aria-label="{{ user.display_name|default:user.username }}">
            {{ user.display_name|default:user.username|first|upper }}
          </div>
        {% endif %}
      </div>
    </div>
  </header>
  <div class="card-body space-y-4 pt-10 flex-1">
    <h3 class="text-base font-semibold text-[var(--text-primary)]">
      <a href="{{ profile_url }}" class="rounded focus:outline-none focus-visible:ring focus-visible:ring-primary/40 hover:underline">{{ user.display_name|default:user.username }}</a>
    </h3>
    <p class="text-sm text-[var(--text-muted)]">@{{ user.username }}</p>
    {% if user.cnpj %}
      <p class="text-xs text-[var(--text-secondary)]">
        <span class="font-medium text-[var(--text-muted)]">{% trans 'CNPJ' %}:</span>
        <span class="font-normal text-[var(--text-primary)]">{{ user.cnpj }}</span>
      </p>
    {% endif %}
    <dl class="space-y-3 text-xs text-[var(--text-tertiary)]">
      <div>
        <dt class="text-[var(--text-muted)]">{% trans 'Status' %}</dt>
        <dd class="font-medium">{% if user.is_active %}{% trans 'Ativo' %}{% else %}{% trans 'Inativo' %}{% endif %}</dd>
      </div>
    </dl>
  </div>
  <footer class="card-footer">
    <a href="{% url 'associados:associado_promover_form' user.pk %}" class="btn btn-secondary w-full text-center">{% trans 'Promover' %}</a>
  </footer>
</article>
