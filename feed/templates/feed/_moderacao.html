{% load i18n %}
{% if request.user.user_type != 'root' %}
{% if post.moderacao and post.moderacao.status != 'aprovado' %}
  <p class="text-xs text-warning-700 mb-2">{{ post.moderacao.get_status_display }}</p>
{% endif %}
{% if perms.feed.change_moderacaopost %}
  <div class="space-y-4">
    <form method="post" hx-post="{% url 'feed:post_moderar' post.pk %}" hx-target="#moderacao-wrapper" hx-swap="outerHTML" class="space-y-4">
      {% csrf_token %}
      <input type="hidden" name="acao" value="aprovar">
      <div class="flex justify-end gap-3">
        <button type="submit" class="btn btn-primary">{% trans "Aprovar" %}</button>
      </div>
    </form>
    <form method="post" hx-post="{% url 'feed:post_moderar' post.pk %}" hx-target="#moderacao-wrapper" hx-swap="outerHTML" class="space-y-4">
      {% csrf_token %}
      <input type="hidden" name="acao" value="rejeitar">
      {% include '_forms/field.html' with id='motivo-'|add:post.id name='motivo' label=_('Motivo') placeholder=_('Explique o motivo da rejeição') %}
      <div class="flex justify-end gap-3">
        <button type="submit" class="btn btn-danger">{% trans "Rejeitar" %}</button>
      </div>
    </form>
  </div>
{% endif %}
{% if message %}
  <p class="mt-2 text-sm text-success-700">{{ message }}</p>
{% endif %}
{% if error %}
  <p class="mt-2 text-sm text-error-600">{{ error }}</p>
{% endif %}
{% endif %}
