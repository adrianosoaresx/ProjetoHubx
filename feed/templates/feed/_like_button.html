{% load i18n lucide_icons %}
{% if request.user.user_type != 'root' %}
{% with liked=post.is_liked count=post.like_count %}
<button
  hx-post="/api/feed/posts/{{ post.id }}/reacoes/"
  hx-ext="json-enc"
  hx-vals='{"vote":"like"}'
  hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
  hx-swap="none"
  hx-on="htmx:afterRequest: if(event.detail.xhr.status===201){const i=this.querySelector('svg');i.classList.add('text-emerald-600');const s=this.querySelector('span');s.textContent=parseInt(s.textContent)+1;}else if(event.detail.xhr.status===204){const i=this.querySelector('svg');i.classList.remove('text-emerald-600');const s=this.querySelector('span');s.textContent=parseInt(s.textContent)-1;}"
  class="btn btn-secondary hover:text-emerald-600"
  aria-label="{% if liked %}{% translate 'Descurtir' %}{% else %}{% translate 'Curtir' %}{% endif %}"
>
  {% if liked %}
    {% lucide 'heart' class='w-4 h-4 text-emerald-600' %}
  {% else %}
    {% lucide 'heart' class='w-4 h-4' %}
  {% endif %}
  <span>{{ count }}</span>
</button>
{% endwith %}
{% endif %}

