{% extends 'base.html' %}
{% load static i18n lucide_icons %}

{% block title %}{% trans "Feed" %} | Hubx{% endblock %}

{% block hero %}
  {% include '_components/hero.html' with title=_('Feed de Postagens') action_template='feed/hero_actions.html' %}
{% endblock %}

{% block content %}
{% if request.user.user_type == 'root' %}
  <p class="text-center text-[var(--text-muted)]">{% trans "Usuário root não tem acesso ao feed." %}</p>
{% else %}
<section class="max-w-7xl mx-auto px-4 py-10">


  <!-- Busca simples -->
  {% url 'feed:listar' as feed_list_url %}
  {% include '_components/search_form.html' with
    q=request.GET.q
    form_id='feed-search-form'
    hx_get=feed_list_url
    hx_target='#feed-grid'
    hx_push_url='true'
    hx_indicator='#feed-loading'
    input_placeholder=_('Buscar postagens…')
    input_extra_classes='flex-1'
    input_hx_get=feed_list_url
    input_hx_target='#feed-grid'
    input_hx_trigger='keyup changed delay:500ms'
    input_hx_include='#feed-search-form'
  %}

  <div id="feed-loading" class="htmx-indicator">{% trans "Carregando…" %}</div>

  {% include "feed/_grid.html" %}

</section>
<script src="{% static 'feed/js/feed.js' %}"></script>
{% endif %}
{% endblock %}
