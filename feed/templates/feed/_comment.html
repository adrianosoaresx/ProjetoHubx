{% load i18n %}
{% if request.user.user_type != 'root' %}
<li class="card" id="comment-{{ comment.id }}">
  <div class="card-body">
  <p class="text-sm font-medium">{{ comment.user.get_full_name|default:comment.user.username }}</p>
  <p class="text-xs text-[var(--text-secondary)]">{{ comment.created_at|date:"SHORT_DATETIME_FORMAT" }}</p>
  <p class="text-sm text-[var(--text-primary)]">{{ comment.texto }}</p>
  <div class="flex gap-2">
    <button type="button" class="btn btn-secondary text-xs" hx-on:click="setReplyTo('{{ comment.id }}')">{% trans "Responder" %}</button>
    {% if comment.user == request.user or request.user.is_staff %}
      <button type="button" class="btn btn-secondary text-[var(--error)] text-xs" hx-delete="/api/feed/comments/{{ comment.id }}/" hx-target="#comment-{{ comment.id }}" hx-swap="outerHTML" hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}' hx-on:error="alert('{% trans "Erro ao excluir comentÃ¡rio" %}')">{% trans "Excluir" %}</button>
    {% endif %}
  </div>
  <ul class="mt-2 space-y-2 ml-4" id="replies-{{ comment.id }}">
    {% for reply in comment.replies.all %}
      {% include 'feed/_comment.html' with comment=reply %}
    {% endfor %}
  </ul>
</div>
</li>
{% endif %}
