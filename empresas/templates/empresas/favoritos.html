{% extends "base.html" %}
{% load i18n %}

{% block title %}{% translate "Empresas Favoritas" %}{% endblock %}

{% block hero %}
  {% include '_components/hero.html' with title=_('Empresas Favoritas') %}
{% endblock %}

{% block content %}
  <div class="py-12 card px-4">
    <div class="card-body">
      <ul class="space-y-4" id="lista-favoritos" hx-on:afterRequest="if (this.children.length === 0) { const li=document.createElement('li'); li.className='text-neutral-600'; li.textContent='{{ _('Nenhuma empresa favorita.')|escapejs }}'; this.appendChild(li); }">
        {% for empresa in empresas %}
          <li id="empresa-{{ empresa.id }}" class="card">
            <div class="card-body">
              {% include '_components/card_empresa.html' with empresa=empresa %}
              <button
                class="btn btn-secondary text-[var(--error)]"
                hx-delete="{% url 'empresas_api:empresa-favoritar' empresa.id %}"
                hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
                hx-target="#empresa-{{ empresa.id }}"
                hx-swap="outerHTML"
              >{% translate "Remover" %}</button>
            </div>
          </li>
        {% empty %}
          <li class="text-neutral-600">{% translate "Nenhuma empresa favorita." %}</li>
        {% endfor %}
      </ul>
    </div>
  </div>
{% endblock %}
