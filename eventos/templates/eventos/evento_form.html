{% extends 'base.html' %}
{% load i18n static %}

{% block title %}{{ title|default:_('Evento') }}{% endblock %}

{% block hero %}
  {% if object and object.pk %}
    {% include "_components/hero_evento_detail.html" with evento=object total_inscricoes=total_inscricoes total_inscricoes_confirmadas=total_inscricoes_confirmadas total_inscricoes_pendentes=total_inscricoes_pendentes total_inscricoes_canceladas=total_inscricoes_canceladas total_presentes=total_presentes vagas_disponiveis=vagas_disponiveis media_feedback=media_feedback total_feedbacks=total_feedbacks %}
  {% else %}
    {% include "_components/hero_evento.html" with title=title|default:_("Eventos") subtitle=subtitle|default_if_none:"" neural_background="eventos" %}
  {% endif %}
{% endblock %}

{% block content %}

    <article class="card">
      <div class="card-header">
        <h2 class="text-xl font-semibold">{{ title|default:_('Evento') }}</h2>
      </div>
      <div class="card-body space-y-6">
        {% with coordinator_flag=coordinator_in_status_group|default:object avatar_preview_value=avatar_preview|default:object.avatar cover_preview_value=cover_preview|default:object.cover %}
          <form method="post" enctype="multipart/form-data" class="space-y-6">
            {% csrf_token %}
            {{ form.non_field_errors }}
            {% include 'eventos/partials/eventos/_form_fields.html' with form=form coordinator_in_status_group=coordinator_flag avatar_preview=avatar_preview_value cover_preview=cover_preview_value %}
            <div class="flex justify-end gap-3 pt-4 border-t border-[var(--border)]">
              {% url 'eventos:calendario' as calendario_url %}
              {% include '_components/back_button.html' with href=back_href fallback_href=calendario_url %}
              <button type="submit" class="btn btn-primary" aria-label="{% trans 'Salvar' %}">{% trans "Salvar" %}</button>
            </div>
          </form>
        {% endwith %}
      </div>
    </article>

{% endblock %}

{% block scripts %}
  {{ block.super }}
  <script src="{% static 'eventos/js/form-nucleo.js' %}"></script>
{% endblock %}
