{% extends 'base.html' %}
{% load i18n static %}

{% block title %}{{ painel_title|default:_('Evento') }}{% endblock %}

{% block hero %}
  <div id="evento-form-hero">
    {% with hero_event=evento|default:object %}
      {% if hero_event %}
        {% include '_components/hero_eventos_detail.html' with evento=hero_event %}
      {% else %}
        {% include '_components/hero_evento.html' with title=painel_title|default:_('Eventos') %}
      {% endif %}
    {% endwith %}
  </div>
{% endblock %}

{% block content %}
  <section class="max-w-5xl mx-auto py-8 px-4">
    {% if object %}
      <article class="card">
        <div class="card-header">
          <h2 class="text-xl font-semibold">{{ painel_title }}</h2>
        </div>
        <div class="card-body">
          <form method="post" enctype="multipart/form-data" class="space-y-6">
            {% csrf_token %}
            {{ form.non_field_errors }}
            {% include 'eventos/partials/eventos/_form_fields.html' with form=form coordinator_in_status_group=coordinator_in_status_group|default:True avatar_preview=avatar_preview|default:object.avatar cover_preview=cover_preview|default:object.cover %}
            <div class="flex justify-end gap-3 pt-4 border-t border-[var(--border)]">
              {% url 'eventos:calendario' as calendario_url %}
              {% include '_components/back_button.html' with href=back_href fallback_href=calendario_url %}
              <button type="submit" class="btn btn-primary" aria-label="{% trans 'Salvar' %}">{% trans "Salvar" %}</button>
            </div>
          </form>
        </div>
      </article>
    {% else %}
      <article class="card">
        <div class="card-header">
          <h2 class="text-xl font-semibold">{{ painel_title }}</h2>
        </div>
        <div class="card-body">
          <form method="post" enctype="multipart/form-data" class="space-y-6">
            {% csrf_token %}
            {{ form.non_field_errors }}
            {% include 'eventos/partials/eventos/_form_fields.html' with form=form coordinator_in_status_group=coordinator_in_status_group|default:False avatar_preview=avatar_preview|default:None cover_preview=cover_preview|default:None %}
            <div class="flex justify-end gap-3 pt-4 border-t border-[var(--border)]">
              {% url 'eventos:calendario' as calendario_url %}
              {% include '_components/back_button.html' with href=back_href fallback_href=calendario_url %}
              <button type="submit" class="btn btn-primary" aria-label="{% trans 'Salvar' %}">{% trans "Salvar" %}</button>
            </div>
          </form>
        </div>
      </article>
    {% endif %}
  </section>
{% endblock %}

{% block scripts %}
  {{ block.super }}
  <script src="{% static 'eventos/js/form-nucleo.js' %}"></script>
{% endblock %}
