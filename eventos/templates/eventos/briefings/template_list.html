{% extends 'base.html' %}
{% load i18n lucide_icons %}

{% block title %}{{ title }}{% endblock %}

{% block hero %}{% include '_components/hero_evento.html' with title=title subtitle=subtitle %}{% endblock %}

{% block content %}
  <article class="card">
    <div class="card-header flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
      <div>
        <h2 class="text-xl font-semibold">{{ title }}</h2>
        {% if subtitle %}
          <p class="text-sm text-[var(--text-secondary)]">{{ subtitle }}</p>
        {% endif %}
      </div>
      <div class="flex flex-wrap items-center gap-3">
        <a href="{% url 'eventos:briefing_template_create' %}" class="btn btn-primary inline-flex items-center gap-2">
          {% lucide 'plus' class='h-4 w-4' aria_hidden='true' %}
          {% trans "Novo modelo" %}
        </a>
        {% if back_href %}
          <a href="{{ back_href }}" class="btn btn-secondary inline-flex items-center gap-2">
            {% lucide 'arrow-left' class='h-4 w-4' aria_hidden='true' %}
            {% trans "Voltar" %}
          </a>
        {% endif %}
      </div>
    </div>
    <div class="card-body space-y-4">
      {% if object_list %}
        <div class="overflow-hidden rounded-lg border border-[var(--border)]">
          <table class="w-full text-left text-sm">
            <thead class="bg-[var(--bg-secondary)] text-xs uppercase text-[var(--text-secondary)]">
              <tr>
                <th class="px-4 py-3">{% trans "Nome" %}</th>
                <th class="px-4 py-3">{% trans "Descrição" %}</th>
                <th class="px-4 py-3">{% trans "Briefings" %}</th>
                <th class="px-4 py-3">{% trans "Status" %}</th>
                <th class="px-4 py-3 text-right">{% trans "Ações" %}</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-[var(--border)]">
              {% for template in object_list %}
                <tr>
                  <td class="px-4 py-3 font-medium text-[var(--text-primary)]">{{ template.nome }}</td>
                  <td class="px-4 py-3 text-[var(--text-secondary)]">{{ template.descricao|default:"-" }}</td>
                  <td class="px-4 py-3 text-[var(--text-secondary)]">{{ template.briefing_total }}</td>
                  <td class="px-4 py-3">
                    {% if template.ativo %}
                      <span class="rounded bg-[var(--success-bg)] px-2 py-1 text-xs text-[var(--success-text)]">{% trans "Ativo" %}</span>
                    {% else %}
                      <span class="rounded bg-[var(--bg-tertiary)] px-2 py-1 text-xs text-[var(--text-secondary)]">{% trans "Inativo" %}</span>
                    {% endif %}
                  </td>
                  <td class="px-4 py-3">
                    <div class="flex flex-wrap justify-end gap-2">
                      <a href="{% url 'eventos:briefing_template_update' template.pk %}" class="btn btn-secondary inline-flex items-center gap-2">
                        {% lucide 'pencil' class='h-4 w-4' aria_hidden='true' %}
                        {% trans "Editar" %}
                      </a>
                      {% if template.ativo %}
                        <a href="{% url 'eventos:briefing_template_delete' template.pk %}" class="btn btn-danger inline-flex items-center gap-2">
                          {% lucide 'ban' class='h-4 w-4' aria_hidden='true' %}
                          {% trans "Desativar" %}
                        </a>
                      {% endif %}
                    </div>
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      {% else %}
        <p class="text-sm text-[var(--text-secondary)]">{% trans "Nenhum modelo de briefing cadastrado." %}</p>
      {% endif %}
    </div>
  </article>
{% endblock %}
