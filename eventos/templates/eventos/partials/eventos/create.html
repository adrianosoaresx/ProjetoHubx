 {% load i18n widget_tweaks %}
{% include "eventos/partials/_painel_hero_oob.html" %}
<section class="max-w-screen-xl mx-auto pt-8 px-6 lg:px-8">
  
   <div class="card">
    <div class="card-header">
        <h2 class="text-xl font-semibold">{% trans "Adicionar evento" %}</h2>
    </div>
    <div class="card-body space-y-6">
      <form method="post" enctype="multipart/form-data" class="space-y-6">
        {% csrf_token %}

        {{ form.non_field_errors }}
        {% for field in form %}
          {% if field.name == 'avatar' or field.name == 'cover' %}
            {% include '_forms/field.html' with field=field|attr:'accept:image/*' %}
          {% else %}
            {% include '_forms/field.html' with field=field %}
          {% endif %}
        {% endfor %}

        <div class="flex justify-end gap-3 pt-4 border-t border-[var(--border)]">
          <a href="{% url 'eventos:calendario' %}" class="btn btn-secondary" aria-label="{% trans 'Voltar' %}">{% trans "Voltar" %}</a>
          <button type="submit" class="btn btn-primary" aria-label="{% trans 'Salvar' %}">{% trans "Salvar" %}</button>
        </div>
      </form>
    </div>
  </div>
</section>

{% block extra_js %}
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const publicoAlvoSelect = document.getElementById('id_publico_alvo');
    const nucleoInput = document.getElementById('id_nucleo');
    const nucleoFieldWrapper = nucleoInput ? nucleoInput.closest('.space-y-1') : null;

    const toggleNucleoField = () => {
      if (!publicoAlvoSelect || !nucleoInput || !nucleoFieldWrapper) {
        return;
      }

      if (publicoAlvoSelect.value === '1') {
        nucleoFieldWrapper.classList.remove('hidden');
      } else {
        nucleoFieldWrapper.classList.add('hidden');
        nucleoInput.value = '';
      }
    };

    toggleNucleoField();

    if (publicoAlvoSelect) {
      publicoAlvoSelect.addEventListener('change', toggleNucleoField);
    }
  });
</script>
{% endblock %}

