{% load i18n widget_tweaks static %}
{% with hero_event=evento|default:object %}
  {% if hero_event %}
    {% include "eventos/partials/_painel_hero_oob.html" with painel_hero_template=painel_hero_template evento=hero_event %}
  {% else %}
    {% include "eventos/partials/_painel_hero_oob.html" %}
  {% endif %}
{% endwith %}
<section class="max-w-screen-xl mx-auto pt-8 px-6 lg:px-8">
  {% if object %}
    <h1 class="text-2xl font-bold text-[var(--text-primary)] mb-6">{{ painel_title }}</h1>

    <form method="post" enctype="multipart/form-data" class="bg-[var(--bg-secondary)] border border-[var(--border)] rounded-2xl card-sm p-6 space-y-6">
      {% csrf_token %}
      {{ form.non_field_errors }}

      {% include "eventos/partials/eventos/_form_fields.html" with form=form coordinator_in_status_group=coordinator_in_status_group|default:True avatar_preview=avatar_preview|default:object.avatar cover_preview=cover_preview|default:object.cover %}

      <div class="flex justify-end gap-3 pt-4 border-t border-[var(--border)]">
        {% url 'eventos:calendario' as calendario_url %}
        {% include '_components/back_button.html' with href=back_href fallback_href=calendario_url %}
        <button type="submit" class="btn btn-primary" aria-label="{% trans 'Salvar' %}">{% trans "Salvar" %}</button>
      </div>
    </form>
  {% else %}
    <div class="card">
      <div class="card-header">
        <h2 class="text-xl font-semibold">{{ painel_title }}</h2>
      </div>
      <div class="card-body space-y-6">
        <form method="post" enctype="multipart/form-data" class="space-y-6">
          {% csrf_token %}

          {{ form.non_field_errors }}

          {% include "eventos/partials/eventos/_form_fields.html" with form=form coordinator_in_status_group=coordinator_in_status_group|default:False avatar_preview=avatar_preview|default:None cover_preview=cover_preview|default:None %}

          <div class="flex justify-end gap-3 pt-4 border-t border-[var(--border)]">
            {% url 'eventos:calendario' as calendario_url %}
            {% include '_components/back_button.html' with href=back_href fallback_href=calendario_url %}
            <button type="submit" class="btn btn-primary" aria-label="{% trans 'Salvar' %}">{% trans "Salvar" %}</button>
          </div>
        </form>
      </div>
    </div>
  {% endif %}
</section>

{% block extra_js %}
  {{ block.super }}
  <script src="{% static 'eventos/js/form-nucleo.js' %}"></script>
{% endblock %}
