{% load i18n %}
{% include "eventos/partials/_painel_hero_oob.html" with painel_hero_template=evento|yesno:'_components/hero_eventos_detail.html,' evento=evento %}
<section class="max-w-screen-xl mx-auto pt-8 px-6 lg:px-8 space-y-6">
  {% include "eventos/partials/eventos/_nav.html" with current_section='tarefas' briefing_evento=briefing_evento briefing_url=briefing_url briefing_label=briefing_label %}
  <div class="flex justify-end">
    <a href="{% if evento %}{% url 'eventos:evento_detalhe' evento.pk %}{% else %}{% url 'eventos:calendario' %}{% endif %}"
       class="btn btn-secondary"
       aria-label="{% trans 'Voltar' %}"
       onclick="if (document.referrer) { try { var u = new URL(document.referrer); if (u.origin === window.location.origin) { history.back(); return false; } } catch (e) {} }">
      {% trans 'Voltar' %}
    </a>
  </div>
  <header class="flex items-center justify-between">
    <h1 class="text-2xl font-bold text-[var(--text-primary)]">{% trans "Tarefas" %}</h1>
    {% firstof evento.pk briefing_evento.evento.pk briefing_evento.pk as ev_pk %}
    <a href="{% url 'eventos:tarefa_criar' %}{% if ev_pk %}?evento={{ ev_pk }}{% endif %}" class="btn btn-primary">{% trans "Nova Tarefa" %}</a>
  </header>
  <ul class="space-y-2">
    {% for tarefa in tarefas %}
      <li>
        <article class="card">
          <div class="card-body">
            {% firstof evento.pk briefing_evento.evento.pk briefing_evento.pk as ev_pk %}
            <a href="{% url 'eventos:tarefa_detalhe' tarefa.pk %}{% if ev_pk %}?evento={{ ev_pk }}{% endif %}" class="font-semibold">{{ tarefa.titulo }}</a>
            <div class="text-sm text-[var(--text-tertiary)]">{{ tarefa.responsavel }} - {{ tarefa.status }}</div>
          </div>
        </article>
      </li>
    {% empty %}
      <li>{% trans "Nenhuma tarefa encontrada." %}</li>
    {% endfor %}
  </ul>
</section>
