{% load i18n lucide_icons %}
{% with content_id|default:'perfil-info' as content_id %}
<details class="card group" {% if open %}open{% endif %}>
  <summary class="card-header flex items-center justify-between gap-4 cursor-pointer">
    <div class="flex items-start gap-3">
      <span
        class="flex h-12 w-12 items-center justify-center rounded-full bg-[var(--color-info-500)]/10 text-[var(--color-info-600)] shadow-lg shadow-[var(--color-info-500)]/20"
      >
        {% lucide icon|default:'contact' class='h-6 w-6' aria_hidden='true' %}
      </span>
      <div class="space-y-1">
        <p class="text-xl font-semibold">{{ title }}</p>
        {% if subtitle %}
          <p class="text-sm text-[var(--text-secondary)]">{{ subtitle }}</p>
        {% endif %}
      </div>
    </div>
    <span class="text-[var(--text-secondary)] transition-transform duration-200 group-open:-rotate-180">
      {% lucide 'chevron-down' class='w-5 h-5' aria_hidden='true' %}
    </span>
  </summary>

  <section
    id="{{ content_id }}"
    class="space-y-6"
    {% if data_perfil_mode %}data-perfil-mode="{{ data_perfil_mode }}"{% endif %}
    {% if data_perfil_username %}data-perfil-username="{{ data_perfil_username }}"{% endif %}
    {% if data_perfil_public_id %}data-perfil-public-id="{{ data_perfil_public_id }}"{% endif %}
    {% if data_perfil_default_url %}data-perfil-default-url="{{ data_perfil_default_url }}"{% endif %}
    {% if data_perfil_default_section %}data-perfil-default-section="{{ data_perfil_default_section }}"{% endif %}
    {% if data_perfil_loading_text %}data-perfil-loading-text="{{ data_perfil_loading_text }}"{% endif %}
    {% if data_perfil_error_text %}data-perfil-error-text="{{ data_perfil_error_text }}"{% endif %}
    {% if extra_data_attrs %}{% for attr, value in extra_data_attrs.items %} {{ attr }}="{{ value }}"{% endfor %}{% endif %}
    aria-live="polite"
    aria-busy="true"
    {% if hx_trigger %}hx-trigger="{{ hx_trigger }}"{% endif %}
    {% if hx_get %}hx-get="{{ hx_get }}"{% endif %}
    {% if hx_target %}hx-target="{{ hx_target }}"{% endif %}
    {% if hx_vals %}hx-vals='{{ hx_vals }}'{% endif %}
    {% if hx_push_url %}hx-push-url="{{ hx_push_url }}"{% endif %}
  >
    <div class="py-6 text-center text-sm text-[var(--text-secondary)]" data-perfil-placeholder>
      {{ loading_text|default:_('Carregando conte√∫do...') }}
    </div>
  </section>

</details>
{% endwith %}
