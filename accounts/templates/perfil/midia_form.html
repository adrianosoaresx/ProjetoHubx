{% extends 'perfil/perfil.html' %}
{% load i18n custom_filters %}

{% block title %}{% if form.instance.pk %}{% trans "Editar Mídia" %}{% else %}{% trans "Nova Mídia" %}{% endif %} | Hubx{% endblock %}

{% block perfil_content %}
<section class="space-y-6">
  <h2 class="text-xl font-semibold">
    {% if form.instance.pk %}{% trans "Editar Mídia" %}{% else %}{% trans "Cadastrar Mídia" %}{% endif %}
  </h2>

  <div class="grid grid-cols-1">
    <div class="bg-white dark:bg-slate-800 p-6 rounded-lg shadow">
      <form method="post" enctype="multipart/form-data" class="space-y-4">
        {% csrf_token %}

        <div class="relative">
          {% with label_attr='aria-label:'|add:form.file.label invalid_attr='aria-invalid:'|add:(form.file.errors|yesno:'true,false') desc_attr='aria-describedby:'|add:form.file.id_for_label|add:'_error' placeholder_attr='placeholder:'|add:form.file.label %}
            {{ form.file|add_class:'peer form-input placeholder-transparent'|attr:placeholder_attr|attr:label_attr|attr:invalid_attr|attr:desc_attr }}
          {% endwith %}
          <label for="{{ form.file.id_for_label }}" class="label-float">{{ form.file.label }}</label>
          {% if form.file.errors %}
            <div id="{{ form.file.id_for_label }}_error" class="text-red-600 text-xs mt-1" role="alert">{{ form.file.errors }}</div>
          {% endif %}
        </div>

        <div class="relative">
          {% with label_attr='aria-label:'|add:form.descricao.label invalid_attr='aria-invalid:'|add:(form.descricao.errors|yesno:'true,false') desc_attr='aria-describedby:'|add:form.descricao.id_for_label|add:'_error' placeholder_attr='placeholder:'|add:form.descricao.label %}
            {{ form.descricao|add_class:'peer form-input placeholder-transparent'|attr:placeholder_attr|attr:label_attr|attr:invalid_attr|attr:desc_attr }}
          {% endwith %}
          <label for="{{ form.descricao.id_for_label }}" class="label-float">{{ form.descricao.label }}</label>
          {% if form.descricao.errors %}
            <div id="{{ form.descricao.id_for_label }}_error" class="text-red-600 text-xs mt-1" role="alert">{{ form.descricao.errors }}</div>
          {% endif %}
        </div>

        <div class="relative">
          {% with label_attr='aria-label:'|add:form.tags_field.label invalid_attr='aria-invalid:'|add:(form.tags_field.errors|yesno:'true,false') desc_attr='aria-describedby:'|add:form.tags_field.id_for_label|add:'_error' placeholder_attr='placeholder:'|add:form.tags_field.label %}
            {{ form.tags_field|add_class:'peer form-input placeholder-transparent'|attr:placeholder_attr|attr:label_attr|attr:invalid_attr|attr:desc_attr }}
          {% endwith %}
          <label for="{{ form.tags_field.id_for_label }}" class="label-float">{{ form.tags_field.label }}</label>
          {% if form.tags_field.errors %}
            <div id="{{ form.tags_field.id_for_label }}_error" class="text-red-600 text-xs mt-1" role="alert">{{ form.tags_field.errors }}</div>
          {% endif %}
        </div>

        <div class="flex justify-end gap-2">
          <a href="{% url 'accounts:midias' %}" class="btn btn-secondary">{% trans "Cancelar" %}</a>
          <button type="submit" class="px-4 py-2 rounded bg-primary text-white hover:bg-primary/90 dark:bg-primary-700 dark:hover:bg-primary-600">{% trans "Salvar" %}</button>
        </div>
      </form>
    </div>
  </div>
</section>
{% endblock %}
