{% extends "base.html" %}
{% load i18n static %}

{% block hero %}
  {% include "_components/hero_profile.html" with is_owner=is_owner profile=profile hero_title=hero_title hero_subtitle=hero_subtitle %}
{% endblock %}

{% block content %}

<div class="space-y-6">
  <div class="card">
    <div class="card-body">
      {% with default_section=perfil_default_section|default:"portfolio" %}
        <section
          id="perfil-content"
          class="space-y-6"
          data-perfil-default-url="{{ perfil_default_url }}"
          data-perfil-default-section="{{ default_section }}"
          data-perfil-mode="{% if is_owner %}owner{% else %}public{% endif %}"
          data-perfil-username="{{ profile.username }}"
          data-perfil-public-id="{{ profile.public_id }}"
          data-perfil-loading-text="{% trans 'Carregando conteúdo...' %}"
          data-perfil-error-text="{% trans 'Não foi possível carregar esta seção.' %}"
          aria-live="polite"
          aria-busy="true"
          hx-trigger="load"
          hx-get="{{ perfil_default_url }}"
          hx-target="#perfil-content"
          {% if default_section %}
            hx-push-url="?section={{ default_section }}"
          {% endif %}
          {% if is_owner %}
            hx-vals='{"section":"{{ default_section }}"}'
          {% else %}
            hx-vals='{"section":"{{ default_section }}","public_id":"{{ profile.public_id|escapejs }}","username":"{{ profile.username|escapejs }}"}'
          {% endif %}
        >
          <div class="py-6 text-center text-sm text-[var(--text-secondary)]" data-perfil-placeholder>
            {% trans "Carregando conteúdo..." %}
          </div>
        </section>
      {% endwith %}
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
  {{ block.super }}
  <script type="module" src="{% static 'perfil/js/perfil.js' %}"></script>
{% endblock %}

