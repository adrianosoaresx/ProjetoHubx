{% load i18n %}
{% url 'accounts:perfil_publico_uuid' user.public_id as profile_url %}
<article class="card h-full overflow-hidden flex flex-col">
  <header class="relative">
    {% if user.cover %}
      <img src="{{ user.cover.url|default:user.cover }}" alt="{% trans 'Capa do associado' %}" class="h-24 w-full object-cover" loading="lazy" />
    {% else %}
      <div class="h-24 w-full bg-gradient-to-r from-[var(--hero-from)] to-[var(--hero-to)]"></div>
    {% endif %}
    <div class="absolute -bottom-8 left-4">
      {% if user.avatar %}
        <img src="{{ user.avatar.url|default:user.avatar }}" alt="{{ user.display_name|default:user.username }}" class="h-16 w-16 rounded-full ring-4 ring-[var(--bg-primary)] object-cover" loading="lazy" />
      {% else %}
        <div class="h-16 w-16 rounded-full ring-4 ring-[var(--bg-primary)] bg-[var(--bg-tertiary)] flex items-center justify-center text-lg font-semibold text-[var(--text-primary)]" role="img" aria-label="{{ user.display_name|default:user.username }}">
          {{ user.display_name|default:user.username|first|upper }}
        </div>
      {% endif %}
    </div>
  </header>
  <div class="card-body pt-10 flex-1">
    <h3 class="text-base font-semibold text-[var(--text-primary)]">
      <a href="{{ profile_url }}" class="hover:underline focus:outline-none focus-visible:ring focus-visible:ring-primary/40 rounded">{{ user.display_name|default:user.username }}</a>
    </h3>
    <p class="mt-1 text-sm text-[var(--text-muted)]">@{{ user.username }}</p>
    {% if user.cnpj %}
      <p class="mt-3 text-xs text-[var(--text-secondary)]">
        <span class="font-medium text-[var(--text-muted)]">{% trans 'CNPJ' %}:</span>
        <span class="font-normal text-[var(--text-primary)]">{{ user.cnpj }}</span>
      </p>
    {% endif %}
    <dl class="mt-4 grid grid-cols-2 gap-3 text-xs text-[var(--text-tertiary)]">
      <div>
        <dt class="text-[var(--text-muted)]">{% trans 'Status' %}</dt>
        <dd class="font-medium">{% if user.is_active %}{% trans 'Ativo' %}{% else %}{% trans 'Inativo' %}{% endif %}</dd>
      </div>
      <div>
        <dt class="text-[var(--text-muted)]">{% trans 'Tipo' %}</dt>
        <dd class="font-medium">{{ user.get_user_type_display|default:user.user_type }}</dd>
      </div>
    </dl>
  </div>
  <div class="card-footer border-t border-[var(--border)] bg-[var(--bg-secondary)] p-4">
    <button type="button" class="btn btn-secondary w-full" data-promover-associado-button data-user-id="{{ user.pk }}">{% trans 'Promover' %}</button>
  </div>
</article>
