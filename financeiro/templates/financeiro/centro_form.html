{% load i18n %}
<form id="centro-form"
      {% if centro %}
        hx-put="/api/financeiro/centros/{{ centro.id }}/"
      {% else %}
        hx-post="/api/financeiro/centros/"
      {% endif %}
      hx-target="#centros-list"
      hx-on="htmx:afterRequest: htmx.ajax('GET', '/financeiro/centros/', '#centros-list'); document.getElementById('modal').innerHTML='';"
      class="p-4 bg-white rounded shadow max-w-md space-y-4" aria-live="assertive">
  {% csrf_token %}
  <div>
    <label for="id_nome" class="block text-sm font-medium">{{ _('Nome') }}</label>
    <input id="id_nome" name="nome" type="text" class="border p-2 w-full" required {% if centro %}value="{{ centro.nome }}"{% endif %} {% if form and form.nome.errors %}aria-invalid="true"{% endif %} />
    {% if form and form.nome.errors %}<p class="text-red-600 text-sm" aria-live="polite">{{ form.nome.errors }}</p>{% endif %}
  </div>
  <div>
    <label for="id_tipo" class="block text-sm font-medium">{{ _('Tipo') }}</label>
    <select id="id_tipo" name="tipo" class="border p-2 w-full" required {% if form and form.tipo.errors %}aria-invalid="true"{% endif %}>
      <option value="organizacao"{% if centro and centro.tipo == 'organizacao' %} selected{% endif %}>{{ _('Organização') }}</option>
      <option value="nucleo"{% if centro and centro.tipo == 'nucleo' %} selected{% endif %}>{{ _('Núcleo') }}</option>
      <option value="evento"{% if centro and centro.tipo == 'evento' %} selected{% endif %}>{{ _('Evento') }}</option>
    </select>
    {% if form and form.tipo.errors %}<p class="text-red-600 text-sm" aria-live="polite">{{ form.tipo.errors }}</p>{% endif %}
  </div>
  <div>
    <label for="id_organizacao" class="block text-sm font-medium">{{ _('Organização') }}</label>
    <input id="id_organizacao" name="organizacao" class="border p-2 w-full" {% if centro and centro.organizacao %}value="{{ centro.organizacao }}"{% endif %} />
  </div>
  <div>
    <label for="id_nucleo" class="block text-sm font-medium">{{ _('Núcleo') }}</label>
    <input id="id_nucleo" name="nucleo" class="border p-2 w-full" {% if centro and centro.nucleo %}value="{{ centro.nucleo }}"{% endif %} />
  </div>
  <div>
    <label for="id_evento" class="block text-sm font-medium">{{ _('Evento') }}</label>
    <input id="id_evento" name="evento" class="border p-2 w-full" {% if centro and centro.evento %}value="{{ centro.evento }}"{% endif %} />
  </div>
  <div>
    <label for="id_descricao" class="block text-sm font-medium">{{ _('Descrição') }}</label>
    <textarea id="id_descricao" name="descricao" class="border p-2 w-full" {% if form and form.descricao.errors %}aria-invalid="true"{% endif %}>{% if centro %}{{ centro.descricao }}{% endif %}</textarea>
    {% if form and form.descricao.errors %}<p class="text-red-600 text-sm" aria-live="polite">{{ form.descricao.errors }}</p>{% endif %}
  </div>
  <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded">{{ _('Salvar') }}</button>
</form>

