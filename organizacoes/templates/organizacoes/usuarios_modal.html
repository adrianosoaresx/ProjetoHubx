{% load i18n %}
<div class="bg-white p-4 rounded shadow" hx-target="this">
  <h3 class="text-lg font-semibold mb-2">{% trans 'Gerenciar usuários' %}</h3>
  <form hx-post="/api/organizacoes/{{ organizacao.id }}/usuarios/" hx-on="htmx:afterRequest: htmx.ajax('GET', '{{ refresh_url }}', '#usuarios-section'); this.closest('#modal').innerHTML='';" class="space-y-2">
    {% csrf_token %}
    <label class="block text-sm" for="user_id">{% trans 'ID do usuário' %}</label>
    <input type="text" name="user_id" class="w-full border px-2 py-1 rounded">
    <button type="submit" class="mt-2 px-3 py-1 bg-blue-600 text-white rounded">{% trans 'Adicionar' %}</button>
  </form>
  <ul class="mt-4 space-y-1">
    {% for user in usuarios %}
      <li class="flex justify-between items-center">
        {{ user.get_full_name|default:user.username }}
        <button hx-delete="/api/organizacoes/{{ organizacao.id }}/usuarios/{{ user.id }}/" hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}' hx-on="htmx:afterRequest: htmx.ajax('GET', '{{ refresh_url }}', '#usuarios-section');" class="text-red-600 text-sm">{% trans 'Remover' %}</button>
      </li>
    {% empty %}
      <li class="text-neutral-500 text-sm">{% trans 'Nenhum usuário associado.' %}</li>
    {% endfor %}
  </ul>
</div>
