{% load i18n %}
<aside
  id="user-list-modal"
  class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"
  role="dialog"
  aria-modal="true"
  hx-target="this"
  hx-swap="outerHTML"
>
  <section class="relative bg-white rounded-lg max-w-2xl w-full p-6" tabindex="-1">
    <button
      type="button"
      class="absolute top-2 right-2 text-neutral-500 hover:text-neutral-700"
      onclick="fecharChat()"
      aria-label="{% trans 'Fechar' %}"
    >âœ•</button>
    <h3 class="text-lg font-semibold text-neutral-900 mb-4">{% trans "Escolha um usuÃ¡rio para conversar" %}</h3>

    <div class="grid sm:grid-cols-2 md:grid-cols-3 gap-4">
      {% for u in users %}
        <button
          hx-get="{% url 'chat:modal_room' u.id %}"
          hx-target="body"
          class="w-full text-left cursor-pointer group border border-neutral-200 rounded-2xl p-4 bg-white shadow-sm hover:shadow-md transition-all flex items-center gap-4"
        >
          <div class="w-12 h-12 flex items-center justify-center rounded-full bg-neutral-100 overflow-hidden" {% if not u.avatar %}role="img" aria-label="{{ u.username }}"{% endif %}>
            {% if u.avatar %}
              <img src="{{ u.avatar.url }}" alt="{{ u.username }}" class="w-full h-full object-cover rounded-full" />
            {% else %}
              <span class="text-neutral-500 font-semibold text-lg">{{ u.username|first|upper }}</span>
            {% endif %}
          </div>
          <div class="flex-1">
            <h4 class="text-sm font-medium text-neutral-800">{{ u.get_full_name|default:u.username }}</h4>
            <p class="text-xs text-neutral-500">@{{ u.username }}</p>
          </div>
          <div class="text-lg text-neutral-400 group-hover:text-primary-600">ğŸ’¬</div>
        </button>
      {% empty %}
        <p class="text-neutral-500 text-sm">{% trans "Nenhum outro membro encontrado." %}</p>
      {% endfor %}
    </div>
  </section>
</aside>
