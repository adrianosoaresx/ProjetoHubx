{% extends "chat/base_chat.html" %}
{% load widget_tweaks i18n %}

{% block title %}{% trans "Nova conversa" %}{% endblock %}

{% block chat_content %}
<main class="max-w-4xl mx-auto p-4">
  <h2 class="text-lg font-semibold mb-4">{% trans "Nova conversa" %}</h2>
  <form method="post" enctype="multipart/form-data" class="space-y-4 bg-white rounded-lg p-4">
    {% csrf_token %}
    <div>
      <label for="{{ form.contexto_tipo.id_for_label }}" class="block text-sm font-medium text-neutral-700">{{ form.contexto_tipo.label }}</label>
      {% url 'chat:contextos' as contextos_url %}
      {% with hx_get_attr='hx-get:'|add:contextos_url %}
      {{ form.contexto_tipo|add_class:"w-full p-2 border rounded"|attr:hx_get_attr|attr:"hx-target:#id_contexto_id"|attr:"hx-trigger:change" }}
      {% endwith %}
      {% if form.contexto_tipo.errors %}
        <p class="text-red-500 text-sm">{{ form.contexto_tipo.errors }}</p>
      {% endif %}
    </div>
    <div>
      <label for="{{ form.contexto_id.id_for_label }}" class="block text-sm font-medium text-neutral-700">{{ form.contexto_id.label }}</label>
      {{ form.contexto_id|add_class:"w-full p-2 border rounded" }}
      {% if form.contexto_id.errors %}
        <p class="text-red-500 text-sm">{{ form.contexto_id.errors }}</p>
      {% endif %}
    </div>
    <div>
      <label for="{{ form.titulo.id_for_label }}" class="block text-sm font-medium text-neutral-700">{{ form.titulo.label }}</label>
      {{ form.titulo|add_class:"w-full p-2 border rounded" }}
      {% if form.titulo.errors %}
        <p class="text-red-500 text-sm">{{ form.titulo.errors }}</p>
      {% endif %}
    </div>
    <div>
      <label for="{{ form.imagem.id_for_label }}" class="block text-sm font-medium text-neutral-700">{{ form.imagem.label }}</label>
      {{ form.imagem|add_class:"w-full p-2 border rounded" }}
      {% if form.imagem.errors %}
        <p class="text-red-500 text-sm">{{ form.imagem.errors }}</p>
      {% endif %}
    </div>
    <div>
      <label for="{{ form.participants.id_for_label }}" class="block text-sm font-medium text-neutral-700">{{ form.participants.label }}</label>
      {{ form.participants|add_class:"w-full p-2 border rounded" }}
      {% if form.participants.errors %}
        <p class="text-red-500 text-sm">{{ form.participants.errors }}</p>
      {% endif %}
    </div>
    <div>
      <label for="{{ form.descricao.id_for_label }}" class="block text-sm font-medium text-neutral-700">{{ form.descricao.label }}</label>
      {{ form.descricao|add_class:"w-full p-2 border rounded" }}
      {% if form.descricao.errors %}
        <p class="text-red-500 text-sm">{{ form.descricao.errors }}</p>
      {% endif %}
    </div>
    <div class="text-right">
      <button type="submit" class="bg-primary text-white px-4 py-2 rounded hover:bg-primary/90">
        {% trans "Criar" %}
      </button>
    </div>
  </form>
</main>
{% endblock %}
